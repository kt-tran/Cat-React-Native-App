{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport React, { useState, useEffect, createContext, useContext } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction addEvent(event, state, setState) {\n  var objIndex = state.findIndex(function (obj) {\n    return obj.event === event;\n  });\n  AsyncStorage.setItem(\"@Log\", JSON.stringify(state));\n  setState(function (x) {\n    x[objIndex].data.push(new Date().getTime());\n    return _toConsumableArray(x);\n  });\n}\nexport var LoggerContext = createContext();\nexport var useLoggerContext = function useLoggerContext() {\n  return useContext(LoggerContext);\n};\nexport var LoggerProvider = function LoggerProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState([{\n      event: \"Chocolate\",\n      data: []\n    }, {\n      event: \"Coffee\",\n      data: []\n    }, {\n      event: \"Fruit\",\n      data: []\n    }, {\n      event: \"Walk\",\n      data: []\n    }]),\n    _useState2 = _slicedToArray(_useState, 2),\n    state = _useState2[0],\n    setState = _useState2[1];\n  var _retrieveData = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var value = yield AsyncStorage.getItem(\"@Log\");\n        console.log(\"Retrieved LOG\");\n        if (value !== null) {\n          setState(JSON.parse(value));\n        }\n      } catch (error) {}\n    });\n    return function _retrieveData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    _retrieveData();\n  }, []);\n  return _jsx(LoggerContext.Provider, {\n    value: [state, setState, function (x) {\n      return addEvent(x, state, setState);\n    }],\n    children: children\n  });\n};","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","AsyncStorage","jsx","_jsx","addEvent","event","state","setState","objIndex","findIndex","obj","setItem","JSON","stringify","x","data","push","Date","getTime","_toConsumableArray","LoggerContext","useLoggerContext","LoggerProvider","_ref","children","_useState","_useState2","_slicedToArray","_retrieveData","_ref2","_asyncToGenerator","value","getItem","console","log","parse","error","apply","arguments","Provider"],"sources":["D:/IFN666 Assignment 3/Assignment3/MobileAppAssignment/contexts/LoggerProvider.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from \"react\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nfunction addEvent(event, state, setState) {\r\n    let objIndex = state.findIndex((obj) => obj.event === event);\r\n    AsyncStorage.setItem(\"@Log\", JSON.stringify(state));\r\n    setState((x) => {\r\n        x[objIndex].data.push(new Date().getTime());\r\n        return [...x];\r\n    });\r\n}\r\nexport const LoggerContext = createContext();\r\nexport const useLoggerContext = () => useContext(LoggerContext);\r\n\r\nexport const LoggerProvider = ({ children }) => {\r\n    const [state, setState] = useState([\r\n        { event: \"Chocolate\", data: [] },\r\n        { event: \"Coffee\", data: [] },\r\n        { event: \"Fruit\", data: [] },\r\n        { event: \"Walk\", data: [] },\r\n    ]);\r\n\r\n    let _retrieveData = async () => {\r\n        try {\r\n            const value = await AsyncStorage.getItem(\"@Log\");\r\n            console.log(\"Retrieved LOG\");\r\n            if (value !== null) {\r\n                // We have data!!\r\n                setState(JSON.parse(value));\r\n            }\r\n        } catch (error) {\r\n            // Error retrieving data\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        _retrieveData();\r\n    }, []);\r\n\r\n    return (\r\n        <LoggerContext.Provider\r\n            value={[state, setState, (x) => addEvent(x, state, setState)]}\r\n        >\r\n            {children}\r\n        </LoggerContext.Provider>\r\n    );\r\n};"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,EAAEC,UAAU,QAAQ,OAAO;AAC7E,OAAOC,YAAY,MAAM,2CAA2C;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAErE,SAASC,QAAQA,CAACC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAE;EACtC,IAAIC,QAAQ,GAAGF,KAAK,CAACG,SAAS,CAAC,UAACC,GAAG;IAAA,OAAKA,GAAG,CAACL,KAAK,KAAKA,KAAK;EAAA,EAAC;EAC5DJ,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,KAAK,CAAC,CAAC;EACnDC,QAAQ,CAAC,UAACO,CAAC,EAAK;IACZA,CAAC,CAACN,QAAQ,CAAC,CAACO,IAAI,CAACC,IAAI,CAAC,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;IAC3C,OAAAC,kBAAA,CAAWL,CAAC;EAChB,CAAC,CAAC;AACN;AACA,OAAO,IAAMM,aAAa,GAAGrB,aAAa,CAAC,CAAC;AAC5C,OAAO,IAAMsB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;EAAA,OAASrB,UAAU,CAACoB,aAAa,CAAC;AAAA;AAE/D,OAAO,IAAME,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAA0B5B,QAAQ,CAAC,CAC/B;MAAEQ,KAAK,EAAE,WAAW;MAAEU,IAAI,EAAE;IAAG,CAAC,EAChC;MAAEV,KAAK,EAAE,QAAQ;MAAEU,IAAI,EAAE;IAAG,CAAC,EAC7B;MAAEV,KAAK,EAAE,OAAO;MAAEU,IAAI,EAAE;IAAG,CAAC,EAC5B;MAAEV,KAAK,EAAE,MAAM;MAAEU,IAAI,EAAE;IAAG,CAAC,CAC9B,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IALKnB,KAAK,GAAAoB,UAAA;IAAEnB,QAAQ,GAAAmB,UAAA;EAOtB,IAAIE,aAAa;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;MAC5B,IAAI;QACA,IAAMC,KAAK,SAAS9B,YAAY,CAAC+B,OAAO,CAAC,MAAM,CAAC;QAChDC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;QAC5B,IAAIH,KAAK,KAAK,IAAI,EAAE;UAEhBxB,QAAQ,CAACK,IAAI,CAACuB,KAAK,CAACJ,KAAK,CAAC,CAAC;QAC/B;MACJ,CAAC,CAAC,OAAOK,KAAK,EAAE,CAEhB;IACJ,CAAC;IAAA,gBAXGR,aAAaA,CAAA;MAAA,OAAAC,KAAA,CAAAQ,KAAA,OAAAC,SAAA;IAAA;EAAA,GAWhB;EAEDxC,SAAS,CAAC,YAAM;IACZ8B,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,OACIzB,IAAA,CAACiB,aAAa,CAACmB,QAAQ;IACnBR,KAAK,EAAE,CAACzB,KAAK,EAAEC,QAAQ,EAAE,UAACO,CAAC;MAAA,OAAKV,QAAQ,CAACU,CAAC,EAAER,KAAK,EAAEC,QAAQ,CAAC;IAAA,EAAE;IAAAiB,QAAA,EAE7DA;EAAQ,CACW,CAAC;AAEjC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}